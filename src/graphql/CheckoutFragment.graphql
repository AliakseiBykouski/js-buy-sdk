fragment MailingAddressFragment on MailingAddress {
  id
  address1
  address2
  city
  company
  country
  firstName
  formatted
  lastName
  latitude
  longitude
  phone
  province
  zip
  name
  countryCodeV2
  provinceCode
}

fragment CheckoutFragment on Checkout {
  id
  ready
  requiresShipping
  note
  paymentDueV2 {
    amount
    currencyCode
  }
  webUrl
  orderStatusUrl
  taxExempt
  taxesIncluded
  currencyCode
  totalTaxV2 {
    amount
    currencyCode
  }
  lineItemsSubtotalPrice {
    amount
    currencyCode
  }
  subtotalPriceV2 {
    amount
    currencyCode
  }
  totalPriceV2 {
    amount
    currencyCode
  }
  completedAt
  createdAt
  updatedAt
  email
  discountApplications(first: 10) {
    pageInfo {
      hasNextPage
      hasPreviousPage
    }
    edges {
      node {
        ...DiscountApplicationFragment
      }
    }
  }
  shippingAddress {
    ...MailingAddressFragment
  }
  shippingLine {
    handle
    priceV2 {
      amount
      currencyCode
    }
    title
  }
  customAttributes {
    key
    value
  }
  order {
    id
    processedAt
    orderNumber
    subtotalPriceV2 {
      amount
      currencyCode
    }
    totalShippingPriceV2 {
      amount
      currencyCode
    }
    totalTaxV2 {
      amount
      currencyCode
    }
    totalPriceV2 {
      amount
      currencyCode
    }
    currencyCode
    totalRefundedV2 {
      amount
      currencyCode
    }
    customerUrl
    shippingAddress {
      ...MailingAddressFragment
    }
    lineItems (first: 250) {
      pageInfo {
        hasNextPage
        hasPreviousPage
      }
      edges {
        cursor
        node {
          title
          variant {
            ...VariantWithProductFragment
          }
          quantity
          customAttributes {
            key
            value
          }
        }
      }
    }
  }
  lineItems (first: 250) {
    pageInfo {
      hasNextPage
      hasPreviousPage
    }
    edges {
      cursor
      node {
        id
        title
        variant {
          ...VariantWithProductFragment
        }
        quantity
        customAttributes {
          key
          value
        }
        discountAllocations {
          allocatedAmount {
            amount
            currencyCode
          }
          discountApplication {
            ...DiscountApplicationFragment
          }
        }
      }
    }
  }
}
